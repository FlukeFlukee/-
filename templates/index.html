<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#4CAF50" />
  <title>ตีแบดวันเสาร์เหงาได้ไง</title>

  <!-- Manifest และ Favicon -->
  <link rel="manifest" href="/static/manifest.json" />
  <link rel="icon" href="/static/icons/icon-192x192.png" />

  <!-- สไตล์ -->
  <link rel="stylesheet" href="/static/css/style.css" />
</head>
<body>
  <h1>คำนวณค่าคอร์ทแบดมินตัน</h1>

  <form method="POST">
    <div>
      <label>ชื่อผู้เล่นและจำนวนชั่วโมง:</label><br />
      {% for i in range(30) %}
        <input type="text" name="name" placeholder="ชื่อผู้เล่น {{ i+1 }}" />
        <input type="number" step="0.1" name="hours" placeholder="ชั่วโมง" /><br />
      {% endfor %}
    </div>

    <div>
      <label>ราคาคอร์ทต่อชั่วโมง: </label>
      <input type="number" step="0.01" name="court_rate" required /><br />

      <label>ราคาลูกแบด: </label>
      <input type="number" step="0.01" name="shuttle_price" required /><br />

      <label>จำนวนลูกแบดที่ใช้: </label>
      <input type="number" name="shuttle_used" required /><br />
    </div>

    <button type="submit">คำนวณ</button>
  </form>

  {% if result %}
    <h2>ผลลัพธ์</h2>
    <table>
      <thead>
        <tr>
          <th>ชื่อ</th>
          <th>ชั่วโมง</th>
          <th>ค่าคอร์ท</th>
          <th>ค่าลูกแบด</th>
          <th>รวมทั้งหมด</th>
        </tr>
      </thead>
      <tbody>
        {% for r in result %}
          <tr>
            <td>{{ r.name }}</td>
            <td>{{ r.hours }}</td>
            <td>{{ r.court_fee }}</td>
            <td>{{ r.shuttle_fee }}</td>
            <td>{{ r.total_fee }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    <p><strong>รวมทั้งหมด: {{ total }}</strong></p>
  {% endif %}

  <!-- Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('/static/service-worker.js')
          .then(function(registration) {
            console.log('ServiceWorker registered: ', registration);
          })
          .catch(function(error) {
            console.log('ServiceWorker registration failed: ', error);
          });
      });
    }
  </script>
</body>
</html>
